<!DOCTYPE html>
<html>
<head>
	<title>Wecker</title>
	<!--<link rel="shortcut icon" href=//lff.l3p3.de/favicon.png>-->
	<meta charset=utf-8>
	<meta name=viewport content="width=device-width">
	<!--<link rel=stylesheet type=text/css href=/css/main.css>-->
	<!--<script src="/scripts/import.js"></script>-->
	<script src="https://cdn.jsdelivr.net/gh/L3P3/lui@v1.3.x/lui.dev.js"></script>
</head>
<body>
<h1>JavaScript is disabled</h1>
<button onclick="location.reload();">reload page</button>
<script>
const {
	init,
	node,
	node_dom,
	node_map,
	hook_model,
}=lui;
const model={
	init:()=>({
		entries:[
			{
				id:0,
				name:"Aufstehen",
				time:"07:00",
			},
			{
				id:1,
				name:"L3P3-Nerven",
				time:"19:00",
			},
			{
				id:2,
				name:"Schlafen",
				time:"21:00",
			},
		],
	}),
	addEntry:(state,item)=>({
		...state,
		entries:[
			...state.entries,
			item,
		],
	}),
};

function IndexEntry({
	I:{
		name="no Name",
		time="00:00",
	},
}){
	return[
		node_dom("tr",null,[
			node_dom("td",{innerText:name}),
			node_dom("td",{innerText:time}),
		]),
	];
}

init(()=>{
	const [{entries},actions]=hook_model(model);

	return[
		{
			S:{
				fontFamily:"arial",
			},
		},
		[
			node_dom("h1[innerText=Wecker]"),
			node_dom("table",{border:"3px"},[
				node_dom("tr",null,[
					node_dom("th[innerText=Name]"),
					node_dom("th[innerText=Uhrzeit]"),
				]),

				node_map(IndexEntry,entries),
			]),
			node_dom("button[innerText=+]",{onclick:()=>{
				const name=prompt("Wecker-Name:");
				const time=prompt("Wecker-Zeit:");
				actions.addEntry({id:Date.now(),name,time});
			}})
		],
	];
});
</script>
</body>
</html>
